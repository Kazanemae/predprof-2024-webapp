# Predprof 2024 AP 

## Общее:   

### Главная страница   
```
// Главная страница. Меняется в зависимости от того, является пользователь
// администратором или обычным пользователем, содержит большую часть
// функционала. Здесь же находится форма логина/регистрации, если
// пользователь не зашел в акк
GET /
```

### Логин   
```

POST /login
Параметры:
username: string
password: string
Редиректит на /
```

### Регистрация   

```
POST /register
Параметры:
username: string
password: string
admin: bool
Редиректит на /
```

### Выход из акка

```
POST /logout
```

## Только для администратора:   

### Получить список всех игровых полей   

```
GET /boards
Возвращает JSON список с объектами следующего формата:
{
"name": string, // Имя поля
"size": int, // Размерность поля
"id": int, // Идентификатор поля
}
```

### Создание нового игрового поля   

```
POST /createBoard
Параметры:
size: int // Сколько клеток поле в ширину и высоту
name: string // Название поля (В тех.требованиях этого нет, но, как по мне, лучше сделать)
Названия могут повторяться, поэтому каждому полю ещё нужен будет свой уникальный ID
```

### Удаление игрового поля   

```
POST /deleteBoard
Параметры:
id: идентификатор поля
```

### Получить список всех призов   

```
GET /prizes
Возвращает JSON список с объектами следующего формата:
{
"name": string, // Название приза
"image": string, // Путь к изображению с иконкой этого приза
"description": string, // Описание приза
"id": int, // ID приза
"x": int, // х коррдината приза
"y": int, // у координата приза
"idField": int, // id поля на котором будет приз
"isWon": bool // Был ли этот приз выигран кем-либо
}
```

### Создать новый приз   

```
POST /createPrize
Параметры:
name: string
image: image data
description: string
```

### Редактировать приз   

```
POST /editPrize
Параметры:
id: int
Опциональные параметры:
name: string
image: image data
description: string
```

### Удалить приз   

```
POST /deletePrize
Параметры:
id: int
```

### Добавить приз в клетку игрового поля   

```
POST /putPrize
board_id: int
prize_id: int
x: int
y: int
```

### Удалить приз из клетки игрового поля

```
POST /clearPrize
board_id: int
x: int
y: int
```

### Получить список игроков   

```
GET /users
Возвращает JSON список с обьектами следующего формата:
{
"username": string // Имя пользователя
"user_id": int // ID пользователя
}
```

### Добавить игрока на игровое поле
   
```
POST /addPlayer
board_id: int
user_id: int
```

### Изменить количество выстрелов у игрока на определенном поле   

```
POST /setNumberOfShots
user_id: int
board_id: int
shots: int
```

## Для игроков:   

### Получить список полей, доступных игроку   

```
GET /boards
Возвращает JSON список с объектами следующего формата:
{
"name": string, // Имя поля
"size": int, // Размерность поля
"id": int, // Идентификатор поля
}
```

### Получить контент игрового поля   

```
GET /board
Параметры:
id: int
Возвращает полную информацию о поле в форме списка, в каждом энтри которого
закодировано состояние одной клетки на поле (Нет приза/Есть приз/Никто ещё не
стрелял)
```

### Сделать выстрел   

```
POST /shoot
Параметры:
id: int // ID поля
x: int
y: int
Возвращает либо null, либо объект с информацией о выигранном призе:
{
"name": string,
"image": string,
"description": string,
}
```

### Получить страничку со списком выигранных призов. Server-generated   

```
GET /prizes
Возвращает HTML
```
